{"ast":null,"code":"var _jsxFileName = \"/Users/hoangnam/4thYear/FinalProject/18VP-Graduation_Project-Tastie-Frontend/delitaste/Frontend/src/components/MerchantDashboard/DashboardFeatures/MDProduct/ProductForMenu.js\",\n    _s = $RefreshSig$();\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPercentage, faTrashAlt } from \"@fortawesome/fontawesome-free-solid\";\nimport React from \"react\";\nimport { Fragment, useState, useEffect } from \"react\";\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\nimport Modal from \"components/Commons/Overlay/Popup/Modal/Modal\";\nimport { removeProductAPI, getProductListAPI } from \"store/actions/ProductAction/ProductAction\";\nimport { setDialogBox } from \"store/actions/UIComponentAction/DialogBoxAction\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport DialogBox from \"components/Commons/Overlay/DialogBox/DialogBox\";\nimport ButtonGroup from \"components/Commons/Button/ButtonGroup/ButtonGroup\";\nimport Button from \"components/Commons/Button/Button\";\nimport { applyDiscountProviderAPI } from \"store/actions/ProviderAction/ProviderAction\";\nimport \"style/Common.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst getListStyle = isDraggingOver => ({\n  background: isDraggingOver ? \"lightblue\" : \"lightgrey\"\n});\n\nfunction ProductForMenu(props) {\n  _s();\n\n  var _discounts$;\n\n  const {\n    selectedProduct,\n    discounts\n  } = props;\n  const [productInDiscount, setProductInDiscount] = useState({});\n  const [selectedDiscount, setSelectedDiscount] = useState((_discounts$ = discounts[0]) === null || _discounts$ === void 0 ? void 0 : _discounts$.discount_id);\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false);\n  const [showDiscount, setShowDiscount] = useState(false);\n  const [productIdForDelete, setProductIdForDelete] = useState(-1);\n\n  const showDialogForDelete = (e, productId) => {\n    e.stopPropagation();\n    setProductIdForDelete(productId);\n    setShowDeleteDialog(true);\n  };\n\n  const applyDiscount = async (productId, discountId) => {\n    console.log(productId, discountId);\n    const res = await props.applyDiscountProviderAPI(productId, discountId);\n    console.log(res);\n\n    if (res) {\n      setShowDiscount(false);\n    }\n  };\n\n  const removeProduct = async productId => {\n    if (productId === -1 || !productId) return;\n    const {\n      product,\n      user\n    } = props;\n    const status = await props.removeProductAPI(productId);\n\n    if (status) {\n      if (user.provider_id !== -1 && user.provider_id !== null) {\n        const productList = await props.getProductListAPI(user.provider_id);\n        console.log(productList);\n        props.setShowHandlerPanel(0);\n        props.setSelectedProduct([]);\n        props.setProductForEdit();\n        props.setItems(productList);\n      }\n    }\n\n    setShowDeleteDialog(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Droppable, {\n    droppableId: String(props.type),\n    type: `droppableSubItem-${props.type}`,\n    children: (provided, snapshot) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"menu-product-wrapper\",\n      ref: provided.innerRef,\n      style: getListStyle(snapshot.isDraggingOver),\n      children: [/*#__PURE__*/_jsxDEV(DialogBox, {\n        visibility: showDeleteDialog,\n        headerText: \"Delete\",\n        close: () => setShowDeleteDialog(false),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dialog-detail-wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dialogbox-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"dialogbox-content-detail-main\",\n              children: \"Are you sure you want to delete this product?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"dialogbox-content-detail-sub\",\n              children: \"This product will be deleted immediately. You can't undo this action.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dialogbox-action\",\n            children: /*#__PURE__*/_jsxDEV(ButtonGroup, {\n              gap: 5,\n              mgRight: 5,\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                color: \"black\",\n                bgColor: \"#ECECEC\",\n                justifyContent: \"center\",\n                gap: \"10px\",\n                width: 80,\n                height: 30,\n                label: \"Cancel\",\n                onClick: () => {\n                  setShowDeleteDialog(false);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                color: \"white\",\n                bgColor: \"#800000\",\n                justifyContent: \"center\",\n                gap: \"10px\",\n                width: 80,\n                height: 30,\n                label: \"Delete\",\n                onClick: () => removeProduct(productIdForDelete)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this), props.subItems.map((item, index) => /*#__PURE__*/_jsxDEV(Draggable, {\n        draggableId: String(item.product_id),\n        index: index,\n        children: (provided, snapshot) => {\n          var _item$price;\n\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"menu-table-wrapper\",\n            onClick: () => {\n              props.setShowHandlerPanel(1);\n              props.setSelectedProduct([item.product_id, props.type]);\n            },\n            style: {\n              backgroundColor: selectedProduct[0] === item.product_id ? \"#E4E4E4\" : \"white\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              ref: provided.innerRef,\n              ...provided.draggableProps,\n              className: \"menu-product-item\",\n              ...provided.dragHandleProps,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"menu-product-img\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  alt: \"product_image\",\n                  src: item.product_image\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"menu-product-name\",\n                children: item.product_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"menu-product-description\",\n                children: item.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"menu-product-price\",\n                children: [\"$ \", (_item$price = item.price) === null || _item$price === void 0 ? void 0 : _item$price.toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"menu-product-price\",\n                children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                  className: \"button-icon\",\n                  icon: faTrashAlt,\n                  onClick: e => showDialogForDelete(e, item.product_id),\n                  style: {\n                    marginRight: \"10px\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                  className: \"button-icon\",\n                  icon: faPercentage,\n                  onClick: () => {\n                    setProductInDiscount(item);\n                    setShowDiscount(true);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 163,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 19\n            }, this), provided.placeholder]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 17\n          }, this);\n        }\n      }, String(item.product_id), false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 13\n      }, this)), provided.placeholder, /*#__PURE__*/_jsxDEV(Modal, {\n        openModal: showDiscount,\n        title: \"Pick-up restaurant location\",\n        width: 30,\n        height: 450,\n        heightAuto: true,\n        transparent: 0.2,\n        closeModal: () => {\n          setShowDiscount(false);\n        },\n        children: /*#__PURE__*/_jsxDEV(Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"menu-product-name\",\n            children: [\"Product name: \", productInDiscount.product_name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-table\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"table table-wrapper\",\n              children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n                className: \"text-capitalize\",\n                children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"table-row-wrapper\",\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    style: {\n                      backgroundColor: \"#790000\",\n                      color: \"white\"\n                    },\n                    children: \"Discount name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 198,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    style: {\n                      backgroundColor: \"#790000\",\n                      color: \"white\"\n                    },\n                    children: \"Value\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 203,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    style: {\n                      backgroundColor: \"#790000\",\n                      color: \"white\"\n                    },\n                    children: \"Remaining\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 208,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    style: {\n                      backgroundColor: \"#790000\",\n                      color: \"white\"\n                    },\n                    children: \"Expire at\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 213,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 21\n                }, this), discounts === null || discounts === void 0 ? void 0 : discounts.map((d, index) => {\n                  var _d$discount_value;\n\n                  return /*#__PURE__*/_jsxDEV(\"tr\", {\n                    className: \"table-row-wrapper\",\n                    style: selectedDiscount === d.discount_id ? {\n                      backgroundColor: \"#F5F5F5\",\n                      cursor: \"pointer\",\n                      fontWeight: 700\n                    } : {\n                      cursor: \"pointer\"\n                    },\n                    onClick: () => {\n                      setSelectedDiscount(d.discount_id);\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: d.discount_name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 236,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: [((_d$discount_value = d.discount_value) === null || _d$discount_value === void 0 ? void 0 : _d$discount_value.toFixed(1)) * 100, \"%\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 237,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: d.limited_offer || \"窶能"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 238,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      style: {\n                        textAlign: \"center\",\n                        width: \"30%\"\n                      },\n                      children: new Date(d.expire_at).toLocaleDateString() || \"窶能"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 239,\n                      columnNumber: 25\n                    }, this)]\n                  }, index, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 220,\n                    columnNumber: 23\n                  }, this);\n                })]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ButtonGroup, {\n            width: 100,\n            mgTop: 10,\n            float: \"center\",\n            mgBottom: 15,\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              color: \"white\",\n              bgColor: \"#101010\",\n              justifyContent: \"center\",\n              gap: \"10px\",\n              width: 120,\n              height: 35,\n              label: \"Apply Discount\",\n              onClick: () => applyDiscount(productInDiscount.product_id, selectedDiscount)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ProductForMenu, \"TfX5udQiIBHSW6QJsY6Y4w2/yaQ=\");\n\n_c = ProductForMenu;\nProductForMenu.propTypes = {\n  removeProductAPI: PropTypes.func.isRequired,\n  getProductListAPI: PropTypes.func.isRequired,\n  applyDiscountProviderAPI: PropTypes.func.isRequired,\n  setDialogBox: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  user: state.UserReducer,\n  product: state.ProductReducer\n});\n\nexport default withRouter(connect(mapStateToProps, {\n  removeProductAPI,\n  getProductListAPI,\n  applyDiscountProviderAPI,\n  setDialogBox\n})(ProductForMenu));\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductForMenu\");","map":{"version":3,"sources":["/Users/hoangnam/4thYear/FinalProject/18VP-Graduation_Project-Tastie-Frontend/delitaste/Frontend/src/components/MerchantDashboard/DashboardFeatures/MDProduct/ProductForMenu.js"],"names":["FontAwesomeIcon","faPercentage","faTrashAlt","React","Fragment","useState","useEffect","DragDropContext","Droppable","Draggable","Modal","removeProductAPI","getProductListAPI","setDialogBox","withRouter","connect","PropTypes","DialogBox","ButtonGroup","Button","applyDiscountProviderAPI","getListStyle","isDraggingOver","background","ProductForMenu","props","selectedProduct","discounts","productInDiscount","setProductInDiscount","selectedDiscount","setSelectedDiscount","discount_id","showDeleteDialog","setShowDeleteDialog","showDiscount","setShowDiscount","productIdForDelete","setProductIdForDelete","showDialogForDelete","e","productId","stopPropagation","applyDiscount","discountId","console","log","res","removeProduct","product","user","status","provider_id","productList","setShowHandlerPanel","setSelectedProduct","setProductForEdit","setItems","String","type","provided","snapshot","innerRef","subItems","map","item","index","product_id","backgroundColor","draggableProps","dragHandleProps","product_image","product_name","description","price","toFixed","marginRight","placeholder","color","d","cursor","fontWeight","discount_name","discount_value","limited_offer","textAlign","width","Date","expire_at","toLocaleDateString","propTypes","func","isRequired","mapStateToProps","state","UserReducer","ProductReducer"],"mappings":"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","sourcesContent":["import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPercentage, faTrashAlt } from \"@fortawesome/fontawesome-free-solid\";\nimport React from \"react\";\nimport { Fragment, useState, useEffect } from \"react\";\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\nimport Modal from \"components/Commons/Overlay/Popup/Modal/Modal\";\nimport {\n  removeProductAPI,\n  getProductListAPI,\n} from \"store/actions/ProductAction/ProductAction\";\nimport { setDialogBox } from \"store/actions/UIComponentAction/DialogBoxAction\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport DialogBox from \"components/Commons/Overlay/DialogBox/DialogBox\";\nimport ButtonGroup from \"components/Commons/Button/ButtonGroup/ButtonGroup\";\nimport Button from \"components/Commons/Button/Button\";\nimport { applyDiscountProviderAPI } from \"store/actions/ProviderAction/ProviderAction\";\nimport \"style/Common.scss\";\n\nconst getListStyle = (isDraggingOver) => ({\n  background: isDraggingOver ? \"lightblue\" : \"lightgrey\",\n});\n\nfunction ProductForMenu(props) {\n  const { selectedProduct, discounts } = props;\n  const [productInDiscount, setProductInDiscount] = useState({});\n  const [selectedDiscount, setSelectedDiscount] = useState(\n    discounts[0]?.discount_id\n  );\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false);\n  const [showDiscount, setShowDiscount] = useState(false);\n  const [productIdForDelete, setProductIdForDelete] = useState(-1);\n  const showDialogForDelete = (e, productId) => {\n    e.stopPropagation();\n    setProductIdForDelete(productId);\n    setShowDeleteDialog(true);\n  };\n  const applyDiscount = async (productId, discountId) => {\n    console.log(productId, discountId);\n    const res = await props.applyDiscountProviderAPI(productId, discountId);\n    console.log(res);\n    if (res) {\n      setShowDiscount(false);\n    }\n  };\n  const removeProduct = async (productId) => {\n    if (productId === -1 || !productId) return;\n    const { product, user } = props;\n    const status = await props.removeProductAPI(productId);\n    if (status) {\n      if (user.provider_id !== -1 && user.provider_id !== null) {\n        const productList = await props.getProductListAPI(user.provider_id);\n        console.log(productList);\n        props.setShowHandlerPanel(0);\n        props.setSelectedProduct([]);\n        props.setProductForEdit();\n        props.setItems(productList);\n      }\n    }\n    setShowDeleteDialog(false);\n  };\n\n  return (\n    <Droppable\n      droppableId={String(props.type)}\n      type={`droppableSubItem-${props.type}`}\n    >\n      {(provided, snapshot) => (\n        <div\n          className=\"menu-product-wrapper\"\n          ref={provided.innerRef}\n          style={getListStyle(snapshot.isDraggingOver)}\n        >\n          <DialogBox\n            visibility={showDeleteDialog}\n            headerText={\"Delete\"}\n            close={() => setShowDeleteDialog(false)}\n          >\n            <div className=\"dialog-detail-wrapper\">\n              <div className=\"dialogbox-content\">\n                <span className=\"dialogbox-content-detail-main\">\n                  Are you sure you want to delete this product?\n                </span>\n                <span className=\"dialogbox-content-detail-sub\">\n                  This product will be deleted immediately. You can't undo this\n                  action.\n                </span>\n              </div>\n              <div className=\"dialogbox-action\">\n                <ButtonGroup gap={5} mgRight={5}>\n                  <Button\n                    color={\"black\"}\n                    bgColor={\"#ECECEC\"}\n                    justifyContent={\"center\"}\n                    gap={\"10px\"}\n                    width={80}\n                    height={30}\n                    label={\"Cancel\"}\n                    onClick={() => {\n                      setShowDeleteDialog(false);\n                    }}\n                  />\n                  <Button\n                    color={\"white\"}\n                    bgColor={\"#800000\"}\n                    justifyContent={\"center\"}\n                    gap={\"10px\"}\n                    width={80}\n                    height={30}\n                    label={\"Delete\"}\n                    onClick={() => removeProduct(productIdForDelete)}\n                  />\n                </ButtonGroup>\n              </div>\n            </div>\n          </DialogBox>\n          {props.subItems.map((item, index) => (\n            <Draggable\n              key={String(item.product_id)}\n              draggableId={String(item.product_id)}\n              index={index}\n            >\n              {(provided, snapshot) => (\n                <div\n                  className=\"menu-table-wrapper\"\n                  onClick={() => {\n                    props.setShowHandlerPanel(1);\n                    props.setSelectedProduct([item.product_id, props.type]);\n                  }}\n                  style={{\n                    backgroundColor:\n                      selectedProduct[0] === item.product_id\n                        ? \"#E4E4E4\"\n                        : \"white\",\n                  }}\n                >\n                  <div\n                    ref={provided.innerRef}\n                    {...provided.draggableProps}\n                    className=\"menu-product-item\"\n                    {...provided.dragHandleProps}\n                  >\n                    <div className=\"menu-product-img\">\n                      <img alt=\"product_image\" src={item.product_image} />\n                    </div>\n                    <span className=\"menu-product-name\">\n                      {item.product_name}\n                    </span>\n                    <span className=\"menu-product-description\">\n                      {item.description}\n                    </span>\n                    <span className=\"menu-product-price\">\n                      &#36; {item.price?.toFixed(2)}\n                    </span>\n                    <div className=\"menu-product-price\">\n                      <FontAwesomeIcon\n                        className=\"button-icon\"\n                        icon={faTrashAlt}\n                        onClick={(e) => showDialogForDelete(e, item.product_id)}\n                        style={{ marginRight: \"10px\" }}\n                      />\n                      <FontAwesomeIcon\n                        className=\"button-icon\"\n                        icon={faPercentage}\n                        onClick={() => {\n                          setProductInDiscount(item);\n                          setShowDiscount(true);\n                        }}\n                      />\n                    </div>\n                  </div>\n                  {provided.placeholder}\n                </div>\n              )}\n            </Draggable>\n          ))}\n          {provided.placeholder}\n          <Modal\n            openModal={showDiscount}\n            title={\"Pick-up restaurant location\"}\n            width={30}\n            height={450}\n            heightAuto={true}\n            transparent={0.2}\n            closeModal={() => {\n              setShowDiscount(false);\n            }}\n          >\n            <Fragment>\n              <span className=\"menu-product-name\">\n                Product name: {productInDiscount.product_name}\n              </span>\n              <div className=\"product-table\">\n                <table className=\"table table-wrapper\">\n                  <tbody className=\"text-capitalize\">\n                    <tr className=\"table-row-wrapper\">\n                      <th\n                        style={{ backgroundColor: \"#790000\", color: \"white\" }}\n                      >\n                        Discount name\n                      </th>\n                      <th\n                        style={{ backgroundColor: \"#790000\", color: \"white\" }}\n                      >\n                        Value\n                      </th>\n                      <th\n                        style={{ backgroundColor: \"#790000\", color: \"white\" }}\n                      >\n                        Remaining\n                      </th>\n                      <th\n                        style={{ backgroundColor: \"#790000\", color: \"white\" }}\n                      >\n                        Expire at\n                      </th>\n                    </tr>\n                    {discounts?.map((d, index) => (\n                      <tr\n                        className=\"table-row-wrapper\"\n                        style={\n                          selectedDiscount === d.discount_id\n                            ? {\n                                backgroundColor: \"#F5F5F5\",\n                                cursor: \"pointer\",\n                                fontWeight: 700,\n                              }\n                            : { cursor: \"pointer\" }\n                        }\n                        onClick={() => {\n                          setSelectedDiscount(d.discount_id);\n                        }}\n                        key={index}\n                      >\n                        <td>{d.discount_name}</td>\n                        <td>{d.discount_value?.toFixed(1) * 100}%</td>\n                        <td>{d.limited_offer || \"窶能"}</td>\n                        <td\n                          style={{\n                            textAlign: \"center\",\n                            width: \"30%\",\n                          }}\n                        >\n                          {new Date(d.expire_at).toLocaleDateString() || \"窶能"}\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n              <ButtonGroup width={100} mgTop={10} float=\"center\" mgBottom={15}>\n                <Button\n                  color={\"white\"}\n                  bgColor={\"#101010\"}\n                  justifyContent={\"center\"}\n                  gap={\"10px\"}\n                  width={120}\n                  height={35}\n                  label={\"Apply Discount\"}\n                  onClick={() =>\n                    applyDiscount(\n                      productInDiscount.product_id,\n                      selectedDiscount\n                    )\n                  }\n                />\n              </ButtonGroup>\n            </Fragment>\n          </Modal>\n        </div>\n      )}\n    </Droppable>\n  );\n}\n\nProductForMenu.propTypes = {\n  removeProductAPI: PropTypes.func.isRequired,\n  getProductListAPI: PropTypes.func.isRequired,\n  applyDiscountProviderAPI: PropTypes.func.isRequired,\n  setDialogBox: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  user: state.UserReducer,\n  product: state.ProductReducer,\n});\n\nexport default withRouter(\n  connect(mapStateToProps, {\n    removeProductAPI,\n    getProductListAPI,\n    applyDiscountProviderAPI,\n    setDialogBox,\n  })(ProductForMenu)\n);\n"]},"metadata":{},"sourceType":"module"}